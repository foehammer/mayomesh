<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no, viewport-fit=cover">

  <title>Mayo Mesh</title>
  <meta name="description" content="A site for information on mesh radio network's in Mayo, Ireland.">

  <!-- Docsify Theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue CSS -->
  <link rel="stylesheet" href="./
<body>
  <div id="app"></div>

  <script>
    // Docsify Configuration
    window.$docsify = {
      name: 'Mayo Mesh',
      image: 'mayo-mesh-colour-200.png',

      // Sidebar Configuration
      auto2top: true,
      loadSidebar: true,
      maxLevel: 0,
      subMaxLevel: 3,

      // Search Plugin
      search: {
        placeholder: 'Type to search',
        noData: 'No matches found.',
        depth: 2,
      },

      // Plugin: instantiate MeshtasticWidget after each Docsify render
      plugins: [
        function (hook, vm) {
          // Keep track of live instances so we can destroy them on navigation
          var instances = {};

          function toInt(val, def) {
            var n = parseInt(val, 10);
            return isNaN(n) ? def : n;
          }

          function cleanupStaleInstances() {
            Object.keys(instances).forEach(function (id) {
              var el = document.getElementById(id);
              // If the element is missing or detached from DOM, destroy the instance
              if (!el || !document.body.contains(el)) {
                try { instances[id].destroy && instances[id].destroy(); } catch (e) { /* noop */ }
                delete instances[id];
              }
            });
          }

          function mountMeshtasticWidgets() {
            cleanupStaleInstances();

            // Find all containers that declare a worker URL
            var nodes = document.querySelectorAll('[data-meshtastic-worker]');
            if (!nodes.length) return;

            nodes.forEach(function (el) {
              if (el.dataset.meshtasticMounted === '1') return;

              // Ensure the element has a stable id (required by the widget)
              if (!el.id) {
                el.id = 'meshtastic-' + Math.random().toString(36).slice(2);
              }

              var workerUrl = el.getAttribute('data-meshtastic-worker');
              var opts = {};

              // Map data-* attributes to widget options
              if (el.hasAttribute('data-refresh-interval')) {
                opts.refreshInterval = toInt(el.getAttribute('data-refresh-interval'), 60);
              }
              if (el.hasAttribute('data-time-range')) {
                opts.defaultTimeRange = toInt(el.getAttribute('data-time-range'), 24);
              }
              if (el.hasAttribute('data-title')) {
                opts.title = el.getAttribute('data-title');
              }
              if (el.hasAttribute('data-max-nodes')) {
                opts.maxNodes = toInt(el.getAttribute('data-max-nodes'), 20);
              }
              if (el.hasAttribute('data-show-controls')) {
                opts.showControls = el.getAttribute('data-show-controls') !== 'false';
              }
              if (el.hasAttribute('data-auto-refresh')) {
                opts.autoRefresh = el.getAttribute('data-auto-refresh') !== 'false';
              }

              // Instantiate the widget (class provided by meshtastic-widget.js)
              if (typeof window.MeshtasticWidget === 'function') {
                instances[el.id] = new window.MeshtasticWidget(el.id, workerUrl, opts);
                el.dataset.meshtasticMounted = '1';
              } else {
                console.error('